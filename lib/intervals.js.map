{"version":3,"file":"intervals.js","sources":["../node_modules/@babel/runtime-corejs2/helpers/defineProperty.js","../node_modules/@babel/runtime-corejs2/helpers/asyncToGenerator.js","../src/store/modules/ls.js","../src/store/modules/intervals/actions.js","../src/store/modules/intervals/mutations.js","../src/store/modules/intervals/index.js"],"sourcesContent":["var _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    _Object$defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var _Promise = require(\"@babel/runtime-corejs2/core-js/promise\");\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    _Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new _Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","import get from 'lodash/get'\nimport set from 'lodash/set'\n\nfunction splitSchemas (cols) {\n  const customColsSchema = {\n    ...cols.schemas,\n    _default: undefined,\n    _protocol: undefined,\n    _unsaved: undefined\n  }\n  const defaultColsSchema = {\n    activeSchema: cols.activeSchema,\n    schemas: {\n      _default: cols.schemas._default,\n      _protocol: cols.schemas._protocol,\n      _unsaved: cols.schemas._unsaved\n    },\n    enum: cols.enum\n  }\n  return { customColsSchema, defaultColsSchema }\n}\nfunction getColsLS (LocalStorage, lsNamespace, name) {\n  let colsFromStorage = {}\n  if (lsNamespace) {\n    const lsPath = lsNamespace.split('.'),\n      lsItemName = lsPath.shift(),\n      lsRouteToItem = `${lsPath.join('.')}.${name}`,\n      appStorage = LocalStorage.getItem(lsItemName)\n    colsFromStorage = get(appStorage, lsRouteToItem, colsFromStorage)\n  } else {\n    colsFromStorage = LocalStorage.getItem(name) || colsFromStorage\n  }\n  return colsFromStorage\n}\n\nfunction setColsLS (LocalStorage, lsNamespace, name, active, cols) {\n  const colsFromStorage = getColsLS(LocalStorage, lsNamespace, name) || {}\n  const { customColsSchema, defaultColsSchema } = splitSchemas(cols)\n  colsFromStorage[active] = defaultColsSchema\n  colsFromStorage['custom-cols-schemas'] = { ...customColsSchema }\n  if (lsNamespace) {\n    const lsPath = lsNamespace.split('.'),\n      lsItemName = lsPath.shift(),\n      lsRouteToItem = `${lsPath.join('.')}.${name}`,\n      appStorage = LocalStorage.getItem(lsItemName) || {}\n    set(appStorage, lsRouteToItem, colsFromStorage)\n    LocalStorage.set(lsItemName, appStorage)\n  } else {\n    LocalStorage.set(name, colsFromStorage)\n  }\n}\n\nexport {\n  getColsLS,\n  setColsLS\n}\n","import _get from 'lodash/get'\nimport { getColsLS, setColsLS } from '../ls'\nconst defaultCols = ['begin', 'end', 'duration', 'timestamp', 'id']\nexport default function ({ Vue, LocalStorage, errorHandler }) {\n  function getParams (state) {\n    const params = {}\n    if (state.limit) {\n      params.count = state.limit\n    }\n    if (state.filter && state.sysFilter) {\n      params.filter = `${state.sysFilter},${state.filter}`\n    } else if (state.sysFilter && !state.filter) {\n      params.filter = `${state.sysFilter}`\n    } else if (!state.sysFilter && state.filter) {\n      params.filter = `${state.filter}`\n    }\n    if (state.begin && !state.reverse) {\n      if (!state.reverse) {\n        params.begin = Math.floor(state.begin / 1000)\n      }\n    }\n    if (state.end) {\n      params.end = Math.floor(state.end / 1000)\n    }\n    if (state.reverse) {\n      params.reverse = state.reverse\n    }\n    return params\n  }\n\n  /* migration to new format storing cols 28.12.20 */\n  async function migrateCols (active, cols) {\n    const schema = {\n      activeSchema: '_default',\n      schemas: {\n        _default: {\n          name: '_default',\n          cols: cols.reduce((res, col) => {\n            if ((defaultCols.includes(col.name) || (!!col.__dest && col.display))) {\n              res.push({ name: col.name, width: col.width })\n            }\n            return res\n          }, [])\n        },\n        _protocol: {\n          name: '_protocol',\n          cols: cols.reduce((res, col) => {\n            if (!col.custom) {\n              res.push({ name: col.name, width: 150 })\n            }\n            return res\n          }, [])\n        }\n      },\n      enum: {}\n    }\n    if (cols.length) {\n      const processedSchemaByCols = cols.reduce((res, col) => {\n        const isColDefault = defaultCols.includes(col.name)\n        res.isDefault = res.isDefault && ((!col.display && !isColDefault) || (col.display && (isColDefault || !!col.__dest)))\n        res.isProtocol = res.isProtocol && !col.custom\n        if (col.display) {\n          res.schema.push({ name: col.name, width: col.width })\n        }\n        res.enum[col.name] = { ...col }\n        delete res.enum[col.name].display\n        delete res.enum[col.name].width\n        return res\n      }, {\n        schema: [],\n        enum: {},\n        isDefault: true,\n        isProtocol: true\n      })\n      if (!processedSchemaByCols.isDefault || !processedSchemaByCols.isProtocol) {\n        const calcResp = await Vue.connector.gw.getCalcs(active, { fields: 'name' })\n        const calcData = calcResp.data\n        errorsCheck(calcData)\n        let name = _get(calcData, 'result[0].name', `Calc-${active}`)\n        name = `${name}[${active}]`\n        schema.activeSchema = name\n        schema.schemas[name] = {\n          name,\n          cols: processedSchemaByCols.schema\n        }\n      }\n      schema.enum = processedSchemaByCols.enum\n    }\n    return schema\n  }\n\n  function getDefaultColsSchema () {\n    return {\n      activeSchema: '_default',\n      schemas: {\n        _default: {\n          name: '_default',\n          cols: defaultCols.map(name => ({ name, width: 150 }))\n        },\n        _protocol: {\n          name: '_protocol',\n          cols: defaultCols.map(name => ({ name, width: 150 }))\n        }\n      },\n      enum: defaultCols.reduce((res, name) => {\n        res[name] = { name }\n        return res\n      }, {})\n    }\n  }\n\n  async function getCols ({ state, commit }, counters) {\n    const colsFromStorage = getColsLS(LocalStorage, state.lsNamespace, state.name)\n    if (colsFromStorage && colsFromStorage[state.active] && colsFromStorage[state.active].length) {\n      let colsSchema = colsFromStorage[state.active]\n      const customColsSchemas = (colsFromStorage && colsFromStorage['custom-cols-schemas'])\n        ? colsFromStorage['custom-cols-schemas'] : {}\n      colsSchema.schemas = { ...colsSchema.schemas, ...customColsSchemas }\n      if (Array.isArray(colsSchema)) {\n        colsSchema = await migrateCols(state.active, colsSchema)\n        colsSchema.schemas = { ...colsSchema.schemas, ...customColsSchemas }\n        setColsLS(LocalStorage, state.lsNamespace, state.name, state.active, colsSchema)\n      }\n\n      /* adding sys cols after migration. 12.11.20 */\n      if (_get(colsSchema.enum, 'action.__dest', undefined) === 'action') {\n        delete colsSchema.enum.action\n      }\n      commit('updateCols', colsSchema)\n    } else {\n      const colsSchema = getDefaultColsSchema()\n      counters.forEach(counter => {\n        const name = counter.name\n        const enumCol = {\n          name\n        }\n        const schemaCol = {\n          name,\n          width: 100,\n          description: `${counter.name}[${counter.type}]`\n        }\n        colsSchema.schemas._protocol.cols.push(schemaCol)\n        colsSchema.enum[name] = enumCol\n      })\n      colsSchema.schemas._protocol.cols.push({ name: 'etc', width: 150, __dest: 'etc' })\n      colsSchema.schemas._default.cols.push({ name: 'etc', width: 150, __dest: 'etc' })\n      colsSchema.enum.etc = { name: 'etc', __dest: 'etc' }\n      commit('setCols', colsSchema)\n    }\n  }\n\n  function errorsCheck (data) {\n    if (data.errors) {\n      data.errors.forEach((error) => {\n        const errObject = new Error(error.reason)\n        errorHandler && errorHandler(errObject)\n      })\n    }\n  }\n\n  async function initTime ({ state, commit, rootState }) {\n    if (rootState.token && state.active && state.activeDevice) {\n      try {\n        Vue.set(state, 'isLoading', true)\n        const params = {\n          reverse: true,\n          count: 1,\n          fields: 'end,begin'\n        }\n        const resp = await Vue.connector.gw.getCalcsDevicesIntervals(state.active, state.activeDevice, 'all', { data: JSON.stringify(params) })\n        const data = resp.data\n        errorsCheck(data)\n        let dateBegin = Date.now(),\n          dateEnd = Date.now()\n        if (data.result.length) {\n          dateBegin = Math.round(data.result[0].begin * 1000)\n          dateEnd = Math.round(data.result[0].end * 1000)\n        }\n        dateBegin = new Date(dateBegin)\n        dateBegin.setHours(0, 0, 0, 0)\n        dateEnd = new Date(dateEnd)\n        dateEnd.setHours(23, 59, 59, 999)\n        commit('setBegin', dateBegin.valueOf())\n        commit('setEnd', dateEnd.valueOf())\n        Vue.set(state, 'isLoading', false)\n      } catch (e) {\n        errorHandler && errorHandler(e)\n        if (DEV) { console.log(e) }\n        Vue.set(state, 'isLoading', false)\n      }\n    }\n  }\n\n  async function get ({ state, commit, rootState }) {\n    commit('reqStart')\n    if (rootState.token && state.active && state.activeDevice) {\n      try {\n        Vue.set(state, 'isLoading', true)\n        const resp = await Vue.connector.gw.getCalcsDevicesIntervals(state.active, state.activeDevice, 'all', { data: JSON.stringify(getParams(state)) })\n        const data = resp.data\n        errorsCheck(data)\n        commit('setMessages', data.result)\n        Vue.set(state, 'isLoading', false)\n      } catch (e) {\n        errorHandler && errorHandler(e)\n        if (DEV) { console.log(e) }\n        Vue.set(state, 'isLoading', false)\n      }\n    }\n  }\n\n  const messageProcessing = (state, packet) => {\n    const message = JSON.parse(packet.payload)\n    const topic = packet.topic\n    const event = topic.split('/').slice(-1)[0]\n    switch (event) {\n      case 'created': {\n        const begin = state.begin,\n          end = state.end,\n          endDate = new Date(end),\n          intervalBegin = message.begin * 1000,\n          intervalEnd = message.end * 1000,\n          nowDate = new Date(),\n          isCurrentEndInTodayRange = endDate.getDate() === nowDate.getDate() && endDate.getMonth() === nowDate.getMonth() && endDate.getFullYear() === nowDate.getFullYear()\n        if ((intervalBegin <= end && intervalEnd >= begin) || isCurrentEndInTodayRange) {\n          Vue.set(state.messages, message.id, message)\n        }\n        break\n      }\n      case 'updated': {\n        if (state.messages[message.id]) {\n          Vue.set(state.messages, message.id, message)\n        }\n        break\n      }\n      case 'finished': {\n        if (state.messages[message.id]) {\n          Vue.set(state.messages, message.id, message)\n        }\n        break\n      }\n      case 'deleted': {\n        if (state.messages[message.id]) {\n          Vue.delete(state.messages, message.id)\n        }\n        break\n      }\n    }\n  }\n\n  let messagesBuffer = [],\n    intervalId = 0\n  function initRenderLoop (state) {\n    return setInterval(() => {\n      if (messagesBuffer.length) {\n        messagesBuffer.forEach(message => messageProcessing(state, message))\n        messagesBuffer = []\n      }\n    }, 500)\n  }\n  async function pollingGet ({ state, commit }) {\n    intervalId = initRenderLoop(state)\n    await Vue.connector.subscribeIntervals(state.active, state.activeDevice, '+', (message, topic, packet) => {\n      messagesBuffer.push(packet)\n    }, { rh: 2 })\n  }\n\n  /* unsubscribe from current active topic */\n  async function unsubscribePooling ({ state }) {\n    if (intervalId) { clearInterval(intervalId) }\n    await Vue.connector.unsubscribeIntervals(state.active, state.activeDevice, '+')\n  }\n\n  return {\n    get,\n    pollingGet,\n    initTime,\n    unsubscribePooling,\n    getCols\n  }\n}\n","import { setColsLS } from '../ls'\nexport default function ({ Vue, LocalStorage, filterHandler, newMessagesInterseptor }) {\n  function setMessages (state, data) {\n    if (data && data.length) {\n      if (state.reverse) {\n        data.reverse()\n      }\n      let messages = state.messages\n      newMessagesInterseptor && newMessagesInterseptor(data)\n      messages = data.reduce((result, message) => {\n        result[message.id] = message\n        return result\n      }, {})\n      Vue.set(state, 'messages', messages)\n    } else {\n      Vue.set(state, 'messages', [])\n    }\n  }\n\n  function clearMessages (state) {\n    Vue.set(state, 'messages', [])\n    newMessagesInterseptor && newMessagesInterseptor([])\n    clearSelected(state)\n  }\n\n  function setLimit (state, count) {\n    Vue.set(state, 'limit', count)\n  }\n\n  function setFilter (state, value) {\n    if (state.filter !== value) {\n      Vue.set(state, 'filter', value)\n    }\n  }\n\n  function setBegin (state, begin) {\n    Vue.set(state, 'begin', begin)\n  }\n\n  function setEnd (state, end) {\n    Vue.set(state, 'end', end)\n  }\n\n  function reqStart () {\n    if (DEV) {\n      console.log('Start Request intervals messages')\n    }\n  }\n\n  function setActive (state, id) {\n    state.newMessagesCount = 0\n    Vue.set(state, 'active', id)\n  }\n\n  function setReverse (state, val) {\n    Vue.set(state, 'reverse', val)\n  }\n\n  async function clear (state) {\n    clearMessages(state)\n    state.filter = ''\n    state.begin = 0\n    state.end = 0\n    state.limit = 1000\n    state.reverse = false\n    await Vue.connector.unsubscribeIntervals(state.active)\n  }\n\n  function setCols (state, cols) {\n    setColsLS(LocalStorage, state.lsNamespace, state.name, state.active, cols)\n    Vue.set(state, 'cols', cols)\n  }\n\n  const updateCols = setCols\n\n  function setSelected (state, indexes) {\n    Vue.set(state, 'selected', indexes)\n  }\n\n  function clearSelected (state) {\n    Vue.set(state, 'selected', [])\n  }\n\n  function setSortBy (state, field) {\n    Vue.set(state, 'sortBy', field)\n  }\n\n  function clearSortBy (state) {\n    Vue.set(state, 'sortBy', null)\n  }\n\n  function setActiveDevice (state, id) {\n    Vue.set(state, 'activeDevice', id)\n  }\n\n  return {\n    setMessages,\n    clearMessages,\n    setLimit,\n    setFilter,\n    setBegin,\n    setEnd,\n    reqStart,\n    setReverse,\n    clear,\n    setActive,\n    setCols,\n    updateCols,\n    setSelected,\n    clearSelected,\n    setSortBy,\n    clearSortBy,\n    setActiveDevice\n  }\n}\n","import getActions from './actions'\nimport getMutations from './mutations'\nimport get from 'lodash/get'\n\nexport default function ({ Vue, LocalStorage, name, errorHandler, filterHandler, newMessagesInterseptor }) {\n  const lsNamespace = get(name, 'lsNamespace', undefined)\n  name = get(name, 'name', name)\n  const actions = getActions({ Vue, LocalStorage, errorHandler }),\n    mutations = getMutations({ Vue, LocalStorage, filterHandler, newMessagesInterseptor })\n\n  const state = {\n    name,\n    lsNamespace,\n    isLoading: false,\n    active: 0,\n    activeDevice: 0,\n    messages: {},\n    filter: '',\n    sysFilter: '',\n    begin: Date.now() - 86400000,\n    end: Date.now(),\n    limit: 1000,\n    reverse: false,\n    cols: undefined,\n    selected: [],\n    sortBy: null\n  }\n\n  return {\n    namespaced: true,\n    state,\n    actions,\n    mutations\n  }\n}\n"],"names":["obj","key","value","_Object$defineProperty","enumerable","configurable","writable","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","_Promise","then","fn","self","this","args","arguments","apply","err","undefined","getColsLS","LocalStorage","lsNamespace","name","colsFromStorage","lsPath","split","lsItemName","shift","lsRouteToItem","join","appStorage","getItem","get","setColsLS","active","cols","customColsSchema","schemas","_default","_protocol","_unsaved","defaultColsSchema","activeSchema","enum","set","defaultCols","Vue","errorHandler","migrateCols","schema","reduce","res","col","includes","__dest","display","push","width","custom","length","processedSchemaByCols","isColDefault","isDefault","isProtocol","connector","gw","getCalcs","fields","calcResp","errorsCheck","calcData","data","_get","counters","state","commit","colsSchema","customColsSchemas","Array","isArray","action","map","forEach","counter","enumCol","schemaCol","description","type","etc","errors","errObject","Error","reason","rootState","token","activeDevice","params","reverse","count","getCalcsDevicesIntervals","JSON","stringify","resp","dateBegin","Date","now","dateEnd","result","Math","round","begin","end","setHours","valueOf","DEV","console","log","limit","filter","sysFilter","floor","messageProcessing","packet","message","parse","payload","topic","slice","endDate","intervalBegin","intervalEnd","nowDate","isCurrentEndInTodayRange","getDate","getMonth","getFullYear","messages","id","delete","messagesBuffer","intervalId","initRenderLoop","setInterval","subscribeIntervals","rh","clearInterval","unsubscribeIntervals","pollingGet","initTime","unsubscribePooling","getCols","newMessagesInterseptor","filterHandler","clearMessages","clearSelected","setCols","setMessages","setLimit","setFilter","setBegin","setEnd","reqStart","setReverse","val","clear","setActive","newMessagesCount","updateCols","setSelected","indexes","setSortBy","field","clearSortBy","setActiveDevice","actions","getActions","mutations","getMutations","namespaced","isLoading","selected","sortBy"],"mappings":"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"}