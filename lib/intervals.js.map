{"version":3,"file":"intervals.js","sources":["../node_modules/@babel/runtime-corejs2/helpers/defineProperty.js","../node_modules/@babel/runtime-corejs2/helpers/asyncToGenerator.js","../src/store/modules/ls.js","../src/store/modules/intervals/actions.js","../src/store/modules/intervals/mutations.js","../src/store/modules/intervals/index.js"],"sourcesContent":["var _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    _Object$defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var _Promise = require(\"@babel/runtime-corejs2/core-js/promise\");\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    _Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new _Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import get from 'lodash/get'\nimport set from 'lodash/set'\n\nfunction splitSchemas (cols) {\n  const customColsSchema = {\n    ...cols.schemas,\n    _default: undefined,\n    _protocol: undefined,\n    _unsaved: undefined\n  }\n  const defaultColsSchema = {\n    activeSchema: cols.activeSchema,\n    schemas: {\n      _default: cols.schemas._default,\n      _protocol: cols.schemas._protocol,\n      _unsaved: cols.schemas._unsaved\n    },\n    enum: cols.enum\n  }\n  return { customColsSchema, defaultColsSchema }\n}\nfunction getColsLS (LocalStorage, lsNamespace, name) {\n  let colsFromStorage = {}\n  if (lsNamespace) {\n    const lsPath = lsNamespace.split('.'),\n      lsItemName = lsPath.shift(),\n      lsRouteToItem = `${lsPath.join('.')}.${name}`,\n      appStorage = LocalStorage.getItem(lsItemName)\n    colsFromStorage = get(appStorage, lsRouteToItem, colsFromStorage)\n  } else {\n    colsFromStorage = LocalStorage.getItem(name) || colsFromStorage\n  }\n  return colsFromStorage\n}\n\nfunction setColsLS (LocalStorage, lsNamespace, name, active, cols) {\n  const colsFromStorage = getColsLS(LocalStorage, lsNamespace, name) || {}\n  const { customColsSchema, defaultColsSchema } = splitSchemas(cols)\n  colsFromStorage[active] = defaultColsSchema\n  colsFromStorage['custom-cols-schemas'] = { ...customColsSchema }\n  if (lsNamespace) {\n    const lsPath = lsNamespace.split('.'),\n      lsItemName = lsPath.shift(),\n      lsRouteToItem = `${lsPath.join('.')}.${name}`,\n      appStorage = LocalStorage.getItem(lsItemName) || {}\n    set(appStorage, lsRouteToItem, colsFromStorage)\n    LocalStorage.set(lsItemName, appStorage)\n  } else {\n    LocalStorage.set(name, colsFromStorage)\n  }\n}\n\nexport {\n  getColsLS,\n  setColsLS\n}\n","import _get from 'lodash/get'\nimport { getColsLS, setColsLS } from '../ls'\nconst defaultCols = ['begin', 'end', 'duration', 'timestamp', 'id']\nexport default function ({ Vue, LocalStorage, errorHandler }) {\n  function getParams (state) {\n    const params = {}\n    if (state.limit) {\n      params.count = state.limit\n    }\n    if (state.filter && state.sysFilter) {\n      params.filter = `${state.sysFilter},${state.filter}`\n    } else if (state.sysFilter && !state.filter) {\n      params.filter = `${state.sysFilter}`\n    } else if (!state.sysFilter && state.filter) {\n      params.filter = `${state.filter}`\n    }\n    if (state.begin && !state.reverse) {\n      if (!state.reverse) {\n        params.begin = Math.floor(state.begin / 1000)\n      }\n    }\n    if (state.end) {\n      params.end = Math.floor(state.end / 1000)\n    }\n    if (state.reverse) {\n      params.reverse = state.reverse\n    }\n    return params\n  }\n\n  /* migration to new format storing cols 28.12.20 */\n  async function migrateCols (active, cols) {\n    const schema = {\n      activeSchema: '_default',\n      schemas: {\n        _default: {\n          name: '_default',\n          cols: cols.reduce((res, col) => {\n            if ((defaultCols.includes(col.name) || (!!col.__dest && col.display))) {\n              res.push({ name: col.name, width: col.width })\n            }\n            return res\n          }, [])\n        },\n        _protocol: {\n          name: '_protocol',\n          cols: cols.reduce((res, col) => {\n            if (!col.custom) {\n              res.push({ name: col.name, width: 150 })\n            }\n            return res\n          }, [])\n        }\n      },\n      enum: {}\n    }\n    if (cols.length) {\n      const processedSchemaByCols = cols.reduce((res, col) => {\n        const isColDefault = defaultCols.includes(col.name)\n        res.isDefault = res.isDefault && ((!col.display && !isColDefault) || (col.display && (isColDefault || !!col.__dest)))\n        res.isProtocol = res.isProtocol && !col.custom\n        if (col.display) {\n          res.schema.push({ name: col.name, width: col.width })\n        }\n        res.enum[col.name] = { ...col }\n        delete res.enum[col.name].display\n        delete res.enum[col.name].width\n        return res\n      }, {\n        schema: [],\n        enum: {},\n        isDefault: true,\n        isProtocol: true\n      })\n      if (!processedSchemaByCols.isDefault || !processedSchemaByCols.isProtocol) {\n        const calcResp = await Vue.connector.gw.getCalcs(active, { fields: 'name' })\n        const calcData = calcResp.data\n        errorsCheck(calcData)\n        let name = _get(calcData, 'result[0].name', `Calc-${active}`)\n        name = `${name}[${active}]`\n        schema.activeSchema = name\n        schema.schemas[name] = {\n          name,\n          cols: processedSchemaByCols.schema\n        }\n      }\n      schema.enum = processedSchemaByCols.enum\n    }\n    return schema\n  }\n\n  function getDefaultColsSchema () {\n    const locale = new Date().toString().match(/([-+][0-9]+)\\s/)[1]\n    return {\n      activeSchema: '_default',\n      schemas: {\n        _default: {\n          name: '_default',\n          cols: defaultCols.map(name => ({ name, width: 150 }))\n        },\n        _protocol: {\n          name: '_protocol',\n          cols: defaultCols.map(name => ({ name, width: 150 }))\n        }\n      },\n      enum: defaultCols.reduce((res, name) => {\n        res[name] = { name }\n        if (name.match(/timestamp$/) || name === 'begin' || name === 'end') {\n          res[name].addition = `${locale.slice(0, 3)}:${locale.slice(3)}`\n          res[name].type = ''\n          res[name].unit = ''\n        }\n        return res\n      }, {})\n    }\n  }\n\n  async function getCols ({ state, commit }, counters) {\n    const colsFromStorage = getColsLS(LocalStorage, state.lsNamespace, state.name)\n    if (colsFromStorage && colsFromStorage[state.active] && colsFromStorage[state.active].length) {\n      let colsSchema = colsFromStorage[state.active]\n      const customColsSchemas = (colsFromStorage && colsFromStorage['custom-cols-schemas'])\n        ? colsFromStorage['custom-cols-schemas'] : {}\n      colsSchema.schemas = { ...colsSchema.schemas, ...customColsSchemas }\n      if (Array.isArray(colsSchema)) {\n        colsSchema = await migrateCols(state.active, colsSchema)\n        colsSchema.schemas = { ...colsSchema.schemas, ...customColsSchemas }\n        setColsLS(LocalStorage, state.lsNamespace, state.name, state.active, colsSchema)\n      }\n\n      /* adding sys cols after migration. 12.11.20 */\n      if (_get(colsSchema.enum, 'action.__dest', undefined) === 'action') {\n        delete colsSchema.enum.action\n      }\n      /* adding locale to all timestamps 26.01.21 */\n      const locale = new Date().toString().match(/([-+][0-9]+)\\s/)[1]\n      Object.keys(colsSchema.enum).forEach(name => {\n        if (name.match(/timestamp$/) || name === 'begin' || name === 'end') {\n          const col = colsSchema.enum[name]\n          col.addition = `${locale.slice(0, 3)}:${locale.slice(3)}`\n          col.type = ''\n          col.unit = ''\n        }\n      })\n      /* adding locale to all timestamps end */\n      commit('updateCols', colsSchema)\n    } else {\n      const colsSchema = getDefaultColsSchema()\n      const locale = new Date().toString().match(/([-+][0-9]+)\\s/)[1]\n      counters.forEach(counter => {\n        const name = counter.name\n        const enumCol = {\n          name,\n          description: `${counter.name}[${counter.type}]`\n        }\n        const schemaCol = {\n          name,\n          width: 100\n        }\n        if (name.match(/timestamp$/) || name === 'begin' || name === 'end') {\n          enumCol.addition = `${locale.slice(0, 3)}:${locale.slice(3)}`\n          enumCol.type = ''\n          enumCol.unit = ''\n          schemaCol.width = 190\n        }\n        colsSchema.schemas._protocol.cols.push(schemaCol)\n        colsSchema.enum[name] = enumCol\n      })\n      colsSchema.schemas._protocol.cols.push({ name: 'etc', width: 150, __dest: 'etc' })\n      colsSchema.schemas._default.cols.push({ name: 'etc', width: 150, __dest: 'etc' })\n      colsSchema.enum.etc = { name: 'etc', __dest: 'etc' }\n      commit('setCols', colsSchema)\n    }\n  }\n\n  function errorsCheck (data) {\n    if (data.errors) {\n      data.errors.forEach((error) => {\n        const errObject = new Error(error.reason)\n        errorHandler && errorHandler(errObject)\n      })\n    }\n  }\n\n  async function initTime ({ state, commit, rootState }) {\n    if (rootState.token && state.active && state.activeDevice) {\n      try {\n        Vue.set(state, 'isLoading', true)\n        const params = {\n          reverse: true,\n          count: 1,\n          fields: 'end,begin'\n        }\n        const resp = await Vue.connector.gw.getCalcsDevicesIntervals(state.active, state.activeDevice, 'all', { data: JSON.stringify(params) })\n        const data = resp.data\n        errorsCheck(data)\n        let dateBegin = Date.now(),\n          dateEnd = Date.now()\n        if (data.result.length) {\n          dateBegin = Math.round(data.result[0].begin * 1000)\n          dateEnd = Math.round(data.result[0].end * 1000)\n        }\n        dateBegin = new Date(dateBegin)\n        dateBegin.setHours(0, 0, 0, 0)\n        dateEnd = new Date(dateEnd)\n        dateEnd.setHours(23, 59, 59, 999)\n        commit('setBegin', dateBegin.valueOf())\n        commit('setEnd', dateEnd.valueOf())\n        Vue.set(state, 'isLoading', false)\n      } catch (e) {\n        errorHandler && errorHandler(e)\n        if (DEV) { console.log(e) }\n        Vue.set(state, 'isLoading', false)\n      }\n    }\n  }\n\n  async function get ({ state, commit, rootState }) {\n    commit('reqStart')\n    if (rootState.token && state.active && state.activeDevice) {\n      try {\n        Vue.set(state, 'isLoading', true)\n        const resp = await Vue.connector.gw.getCalcsDevicesIntervals(state.active, state.activeDevice, 'all', { data: JSON.stringify(getParams(state)) })\n        const data = resp.data\n        errorsCheck(data)\n        commit('setMessages', data.result)\n        Vue.set(state, 'isLoading', false)\n      } catch (e) {\n        errorHandler && errorHandler(e)\n        if (DEV) { console.log(e) }\n        Vue.set(state, 'isLoading', false)\n      }\n    }\n  }\n\n  const messageProcessing = (state, packet) => {\n    const message = JSON.parse(packet.payload)\n    const topic = packet.topic\n    const event = topic.split('/').slice(-1)[0]\n    switch (event) {\n      case 'created': {\n        const begin = state.begin,\n          end = state.end,\n          endDate = new Date(end),\n          intervalBegin = message.begin * 1000,\n          intervalEnd = message.end * 1000,\n          nowDate = new Date(),\n          isCurrentEndInTodayRange = endDate.getDate() === nowDate.getDate() && endDate.getMonth() === nowDate.getMonth() && endDate.getFullYear() === nowDate.getFullYear()\n        if ((intervalBegin <= end && intervalEnd >= begin) || isCurrentEndInTodayRange) {\n          Vue.set(state.messages, message.id, message)\n        }\n        break\n      }\n      case 'updated': {\n        if (state.messages[message.id]) {\n          Vue.set(state.messages, message.id, message)\n        }\n        break\n      }\n      case 'finished': {\n        if (state.messages[message.id]) {\n          Vue.set(state.messages, message.id, message)\n        }\n        break\n      }\n      case 'deleted': {\n        if (state.messages[message.id]) {\n          Vue.delete(state.messages, message.id)\n        }\n        break\n      }\n    }\n  }\n\n  let messagesBuffer = [],\n    intervalId = 0\n  function initRenderLoop (state) {\n    return setInterval(() => {\n      if (messagesBuffer.length) {\n        messagesBuffer.forEach(message => messageProcessing(state, message))\n        messagesBuffer = []\n      }\n    }, 500)\n  }\n  async function pollingGet ({ state, commit }) {\n    intervalId = initRenderLoop(state)\n    await Vue.connector.subscribeIntervals(state.active, state.activeDevice, '+', (message, topic, packet) => {\n      messagesBuffer.push(packet)\n    }, { rh: 2 })\n  }\n\n  /* unsubscribe from current active topic */\n  async function unsubscribePooling ({ state }) {\n    if (intervalId) { clearInterval(intervalId) }\n    await Vue.connector.unsubscribeIntervals(state.active, state.activeDevice, '+')\n  }\n\n  return {\n    get,\n    pollingGet,\n    initTime,\n    unsubscribePooling,\n    getCols\n  }\n}\n","import { setColsLS } from '../ls'\nexport default function ({ Vue, LocalStorage, filterHandler, newMessagesInterseptor }) {\n  function setMessages (state, data) {\n    if (data && data.length) {\n      if (state.reverse) {\n        data.reverse()\n      }\n      let messages = state.messages\n      newMessagesInterseptor && newMessagesInterseptor(data)\n      messages = data.reduce((result, message) => {\n        result[message.id] = message\n        return result\n      }, {})\n      Vue.set(state, 'messages', messages)\n    } else {\n      Vue.set(state, 'messages', [])\n    }\n  }\n\n  function clearMessages (state) {\n    Vue.set(state, 'messages', [])\n    newMessagesInterseptor && newMessagesInterseptor([])\n    clearSelected(state)\n  }\n\n  function setLimit (state, count) {\n    Vue.set(state, 'limit', count)\n  }\n\n  function setFilter (state, value) {\n    if (state.filter !== value) {\n      Vue.set(state, 'filter', value)\n    }\n  }\n\n  function setBegin (state, begin) {\n    Vue.set(state, 'begin', begin)\n  }\n\n  function setEnd (state, end) {\n    Vue.set(state, 'end', end)\n  }\n\n  function reqStart () {\n    if (DEV) {\n      console.log('Start Request intervals messages')\n    }\n  }\n\n  function setActive (state, id) {\n    state.newMessagesCount = 0\n    Vue.set(state, 'active', id)\n  }\n\n  function setReverse (state, val) {\n    Vue.set(state, 'reverse', val)\n  }\n\n  async function clear (state) {\n    clearMessages(state)\n    state.filter = ''\n    state.begin = 0\n    state.end = 0\n    state.limit = 1000\n    state.reverse = false\n    await Vue.connector.unsubscribeIntervals(state.active)\n  }\n\n  function setCols (state, cols) {\n    setColsLS(LocalStorage, state.lsNamespace, state.name, state.active, cols)\n    Vue.set(state, 'cols', cols)\n  }\n\n  const updateCols = setCols\n\n  function setSelected (state, indexes) {\n    Vue.set(state, 'selected', indexes)\n  }\n\n  function clearSelected (state) {\n    Vue.set(state, 'selected', [])\n  }\n\n  function setSortBy (state, field) {\n    Vue.set(state, 'sortBy', field)\n  }\n\n  function clearSortBy (state) {\n    Vue.set(state, 'sortBy', null)\n  }\n\n  function setActiveDevice (state, id) {\n    Vue.set(state, 'activeDevice', id)\n  }\n\n  return {\n    setMessages,\n    clearMessages,\n    setLimit,\n    setFilter,\n    setBegin,\n    setEnd,\n    reqStart,\n    setReverse,\n    clear,\n    setActive,\n    setCols,\n    updateCols,\n    setSelected,\n    clearSelected,\n    setSortBy,\n    clearSortBy,\n    setActiveDevice\n  }\n}\n","import getActions from './actions'\nimport getMutations from './mutations'\nimport get from 'lodash/get'\n\nexport default function ({ Vue, LocalStorage, name, errorHandler, filterHandler, newMessagesInterseptor }) {\n  const lsNamespace = get(name, 'lsNamespace', undefined)\n  name = get(name, 'name', name)\n  const actions = getActions({ Vue, LocalStorage, errorHandler }),\n    mutations = getMutations({ Vue, LocalStorage, filterHandler, newMessagesInterseptor })\n\n  const state = {\n    name,\n    lsNamespace,\n    isLoading: false,\n    active: 0,\n    activeDevice: 0,\n    messages: {},\n    filter: '',\n    sysFilter: '',\n    begin: Date.now() - 86400000,\n    end: Date.now(),\n    limit: 1000,\n    reverse: false,\n    cols: undefined,\n    selected: [],\n    sortBy: null\n  }\n\n  return {\n    namespaced: true,\n    state,\n    actions,\n    mutations\n  }\n}\n"],"names":["module","obj","key","value","_Object$defineProperty","enumerable","configurable","writable","exports","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","_Promise","then","fn","self","this","args","arguments","apply","err","undefined","getColsLS","LocalStorage","lsNamespace","name","lsRouteToItem","colsFromStorage","lsItemName","lsPath","split","shift","join","appStorage","getItem","get","setColsLS","active","cols","customColsSchema","schemas","_default","_protocol","_unsaved","defaultColsSchema","activeSchema","enum","set","defaultCols","Vue","errorHandler","schema","reduce","res","col","includes","__dest","display","push","width","custom","length","processedSchemaByCols","isColDefault","isDefault","isProtocol","connector","gw","getCalcs","fields","calcResp","errorsCheck","calcData","data","_get","counters","state","commit","colsSchema","customColsSchemas","Array","isArray","migrateCols","action","locale","Date","toString","match","Object","keys","forEach","addition","slice","type","unit","map","getDefaultColsSchema","counter","enumCol","description","schemaCol","etc","errors","errObject","Error","reason","rootState","token","activeDevice","params","reverse","count","getCalcsDevicesIntervals","JSON","stringify","resp","dateBegin","now","dateEnd","result","Math","round","begin","end","setHours","valueOf","DEV","console","log","limit","filter","sysFilter","floor","messageProcessing","packet","message","parse","payload","topic","endDate","intervalBegin","intervalEnd","nowDate","isCurrentEndInTodayRange","getDate","getMonth","getFullYear","messages","id","delete","messagesBuffer","intervalId","setInterval","initRenderLoop","subscribeIntervals","rh","clearInterval","unsubscribeIntervals","pollingGet","initTime","unsubscribePooling","getCols","newMessagesInterseptor","filterHandler","clearMessages","clearSelected","setCols","setMessages","setLimit","setFilter","setBegin","setEnd","reqStart","setReverse","val","clear","setActive","newMessagesCount","updateCols","setSelected","indexes","setSortBy","field","clearSortBy","setActiveDevice","actions","getActions","mutations","getMutations","namespaced","isLoading","selected","sortBy"],"mappings":"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"}